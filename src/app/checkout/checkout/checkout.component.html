<div class="checkout-page container mt-5">
  <!-- Order Summary Section -->
  <div class="order-summary card mb-4">
    <div class="card-body">
      <h3 class="card-title">Order Summary</h3>
      <ul class="list-group list-group-flush">
        <li class="list-group-item d-flex justify-content-between align-items-center" *ngFor="let item of cartItems.cartItems">
          <!-- Safe Navigation Operator Used -->
          <span>{{ item?.product?.name }} - {{ item?.quantity }} x {{ item?.product?.price }}</span>
          <span class="badge bg-primary rounded-pill">{{ item?.quantity * item?.product?.price }}</span>
        </li>
      </ul>
      <div class="order-total mt-3 d-flex justify-content-between">
        <strong>Total Amount:</strong>
        <span>{{ totalAmount }}</span>
      </div>
    </div>
  </div>

  <!-- Shipping Details Form -->
  <form (ngSubmit)="saveShippingDetails()" #shippingForm="ngForm" class="mb-4">
    <div class="mb-3">
      <label for="fullName" class="form-label">Full Name:</label>
      <input id="fullName" name="fullName" [(ngModel)]="shippingDetails.fullName" type="text" class="form-control" required />
    </div>
    <div class="mb-3">
      <label for="address" class="form-label">Address:</label>
      <input id="address" name="address" [(ngModel)]="shippingDetails.address" type="text" class="form-control" required />
    </div>
    <div class="mb-3">
      <label for="city" class="form-label">City:</label>
      <input id="city" name="city" [(ngModel)]="shippingDetails.city" type="text" class="form-control" required />
    </div>
    <div class="mb-3">
      <label for="state" class="form-label">State:</label>
      <input id="state" name="state" [(ngModel)]="shippingDetails.state" type="text" class="form-control" required />
    </div>
    <div class="mb-3">
      <label for="zipCode" class="form-label">Zip Code:</label>
      <input id="zipCode" name="zipCode" [(ngModel)]="shippingDetails.zipCode" type="text" class="form-control" required />
    </div>
    <div class="mb-3">
      <label for="phoneNumber" class="form-label">Phone Number:</label>
      <input id="phoneNumber" name="phoneNumber" [(ngModel)]="shippingDetails.phoneNumber" type="text" class="form-control" required />
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="shippingForm.invalid">Save Shipping Details</button>
  </form>

  <!-- Proceed to Payment Button -->
  <button (click)="proceedToPay()" [disabled]="!isShippingDetailsSaved" class="btn btn-success">
    Pay Now
  </button>
</div>
